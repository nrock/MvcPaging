@model IPagedList<MvcPaging.Demo.Models.Product>

<div class="search">
    <input type="text" placeholder="search" id="SearchString" value="@Model.SearchString"  />

    <a   id="Search" value="search" data-ajax="true" data-ajax-begin="beginPaging" data-ajax-success="successPaging" data-ajax-update="#gridcontainer" data-ajax-mode="replace" data-href="/Paging/AjaxPage?page=1&search="  >search</a>

</div>
<table class="grid">
    <thead>
        <tr>
            <th>Product name</th>
            <th>Category</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var product in Model)
        {
            <tr>
                <td>@product.Name</td>
                <td>@product.Category</td>
            </tr>
        }
    </tbody>
</table>
<div class="pager">
    @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount, Model.SearchString, string.Empty, string.Empty, new AjaxOptions
    {
        OnBegin = "beginPaging",
        OnSuccess = "successPaging",
        UpdateTargetId = "gridcontainer"
    }).Options(o => o.Action("AjaxPage"))

    Displaying @Model.ItemStart - @Model.ItemEnd of @Model.TotalItemCount item(s)

</div>


<script type="text/javascript">

    $(function() {
        $('#Search').click(function () {
            var searchTerm = $('#SearchString').val();
            var href = $(this).attr('data-href') + searchTerm;
            $(this).attr('href', href); 
        });
    });

    function beginPaging(args) {
        // Animate
        $('#gridcontainer').block({ message: null });
    }

    function successPaging() {
        // Animate
        $('#gridcontainer').unblock(); 
    }

    function failurePaging() {
        alert("Could not retrieve list.");
    }

</script>

